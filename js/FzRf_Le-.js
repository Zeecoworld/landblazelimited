import{d as P,v as h,i as b,c as i,fh as f,ge as R,dZ as v}from"./ChUMkS6P.js";const k=P({name:"MultiRangeSlider",props:{values:{type:Array,default:()=>[]},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},site:{type:Object},isEnabledRangeLabel:{type:Boolean,default:!1}},emits:["change"],setup(t,{emit:u}){const r=h(null),l=h({}),g=b(()=>{var e;return((e=t.site)==null?void 0:e.paymentCurrencyCode)||"USD"}),d=(e,n,a,s,o=1)=>{try{if(n[a]===e)return;if(a===0){const c=Math.min(e,f(n[a+1])-o);s.value=c,n[a]=c}else{const c=Math.max(e,f(n[a-1])+o);s.value=c,n[a]=c}}catch(c){console.log(c)}},m=(e,n)=>{try{const a=+e.target.value,s=l.value[n];d(a,t.values,n,s,t.step)}catch(a){console.log(a)}};return{inputRefs:l,currency:g,onChange:(e,n)=>{try{clearTimeout(r.value),r.value=setTimeout(()=>{m(e,n),u("change",t.values)},600)}catch(a){console.log(a)}}}},render(){var t;if((t=this.values)!=null&&t.length)return i("div",{class:"kmb-site-multi-range-slider",key:"multi-range-slider"},[i("div",{class:"kmb-range-slider min-h-5"},[this.values.filter(Boolean).map((u,r)=>i("input",{key:r,value:u,type:"range",min:this.min,max:this.max,step:this.step,"data-value":u,ref:l=>this.inputRefs[r]=l,class:"kmb-site-multi-range-slider-input",onChange:l=>this.onChange(l,r)},null))]),this.isEnabledRangeLabel&&i("div",{class:"kmb-widget-row justify-between mt-2"},[i("div",{class:"kmb-widget-col"},[i("span",{class:"kmb-range-value"},[`${this.values[0]}${this.currency?` ${this.currency}`:""}`])]),i("div",{class:"kmb-widget-col"},[i("span",{class:"kmb-range-value"},[`${this.values[1]}${this.currency?` ${this.currency}`:""}`])])])])}}),C=P({name:"CollectionFilterByPrice",props:{query:{type:Object,required:!0},widgetSettings:{type:Object,required:!0},site:{type:Object},isEnabled:{type:Boolean,default:!1},minRangePrice:{type:Number,default:0},maxRangePrice:{type:Number,default:1e3},labelOverride:{type:String}},emits:["filter"],setup(t,{emit:u}){var m,y;const r=h([((m=t.query)==null?void 0:m.minPrice)||t.minRangePrice,((y=t.query)==null?void 0:y.maxPrice)||t.maxRangePrice]),l=b(()=>{var e;return((e=t.site)==null?void 0:e.styles)||new R}),g=b(()=>{var e,n,a,s,o;return(n=(e=t.widgetSettings)==null?void 0:e.styleSettings)!=null&&n.textColor?(o=(s=t.widgetSettings)==null?void 0:s.styleSettings)==null?void 0:o.textColor:(a=l.value)==null?void 0:a.storeBodyColor}),d=()=>{try{t.query.minPrice=r.value[0],t.query.maxPrice=r.value[1],u("filter")}catch(e){console.log(e)}};return v(()=>t.minRangePrice,e=>{r.value.splice(0,1,e)}),v(()=>t.maxRangePrice,e=>{r.value.splice(1,1,e)}),{rangePrices:r,rangeSliderColor:g,onFilter:d}},render(){if(this.isEnabled)return i("div",{class:"kmb-collection-filter-by-price",style:{"--rangeBackground":this.rangeSliderColor}},[i(k,{site:this.site,values:this.rangePrices,min:this.minRangePrice,max:this.maxRangePrice,isEnabledRangeLabel:!0,class:"kmb-collection-filter-by-price-range kmb-widget-text-caption1",onChange:()=>{this.onFilter()}},null)])}});export{C as default};
