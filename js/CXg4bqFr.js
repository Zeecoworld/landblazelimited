const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DZ1BPuZ9.js","./ChUMkS6P.js","entry.CPpMyCbQ.css","./D9Hbs_0D.js","./A9nCysFq.js","./CeHZR0Ph.js","./Dc9JWRGJ.js","./CWbzfonA.js","./BJMjv6C5.js","./FzRf_Le-.js","./CTdY00Fs.js","./CY0cy9zf.js","./BtB4ohWJ.js","./CwSrIZgE.js","./BVv2S30c.js","./DsvMmw88.js","./-oxM8m70.js","./DfxtQXwc.js","./D6uAcWDZ.js","./DSoJ1F4P.js","./ClCWloev.js","./ah8qzS9z.js","./CiHLLTvI.js","./QreLNsmH.js","./B7AWbE-9.js","./B-lU7qM5.js","./CyET3sau.js","./uNGU_bZw.js","./BgHkq_PJ.js","./cuZZCMxh.js","./DldpU35S.js","./DzFfo68f.js","./CfeTNxv7.js","./CuhE2MTX.js","./Mt02bkho.js","./6SHmCfzU.js"])))=>i.map(i=>d[i]);
import{d as k,s as E,v as f,i as v,c as l,k as p,eb as s,l as g,_ as y,a0 as C,dH as x,ah as F,K,N as w}from"./ChUMkS6P.js";import{b as T}from"./6Po4j3qC.js";import{D as j}from"./D9Hbs_0D.js";import{a as A,S as I}from"./BJMjv6C5.js";import"./BVv2S30c.js";import"./CcdTgBWD.js";import"./VGazA56a.js";import"./A9nCysFq.js";import"./CeHZR0Ph.js";const G=g(()=>y(()=>import("./DZ1BPuZ9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),W=g(()=>y(()=>import("./FzRf_Le-.js"),__vite__mapDeps([9,1,2]),import.meta.url)),B=g(()=>y(()=>import("./CTdY00Fs.js"),__vite__mapDeps([10,1,2,11,3,4,5]),import.meta.url)),R=g(()=>y(()=>import("./BtB4ohWJ.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]),import.meta.url)),V=k({name:"CollectionSidebarWidgetItem",props:{query:{type:Object,required:!0},collection:{type:Object,required:!0},widget:{type:Object,required:!0},widgetSettings:{type:Object,required:!0},productGroupOptions:{type:Object,required:!0},site:{type:Object},activeKey:{type:[Number,String]},widgetIndex:{type:Number,default:0},isEnabledFilter:{type:Boolean,default:!1}},emits:["filter","setActiveKey"],setup(e,{emit:c}){const{t:u}=E(),o=f(null),d=f(null),b=v(()=>{const{list:t}=T(e.widget);return t||[]}),O=t=>{try{t.label?(e.query.tagLabels=[t.label],o.value=t==null?void 0:t.key):delete e.query.tagLabels,c("filter")}catch(i){console.log(i)}},P=()=>{var t,i;try{if(e.query.minPrice=(t=e.productGroupOptions)==null?void 0:t.minPrice,e.query.maxPrice=(i=e.productGroupOptions)==null?void 0:i.maxPrice,c("filter"),d.value){const{minPrice:n,maxPrice:r}=e.query||{};d.value.rangePrices=[n,r]}}catch(n){console.log(n)}},_=()=>{var n,r,a;const{minPrice:t,maxPrice:i}=e.query||{};if(!(((n=e.widget)==null?void 0:n.type)!=s.Price||!t&&!i)&&(((r=e.productGroupOptions)==null?void 0:r.minPrice)!=t||i!=((a=e.productGroupOptions)==null?void 0:a.maxPrice)))return l("button",{class:"kmb-filter-clear-btn",onClick:()=>P()},[u("labels.clear")])},q=t=>{if(e.widget.type==s.Collections){const i=t,{id:n,slug:r,pageTemplateType:a}=i,m=x({slug:r,pageTemplateType:a||F.Collection});return l("li",{class:"kmb-page-sidebar-widget-content-list-item kmb-collection-sidebar-widget-content-list-item kmb-collection-sidebar-widget-content-list-collection-item kmb-widget-text-body2 flex justify-between","data-collection-id":n,key:n},[l(K,{class:"kmb-collection-sidebar-widget-content-list-item-link flex justify-between w-full",to:m},{default:()=>[i.name,w(" "),l("span",{class:"kmb-amount-of-products-in-collection"},[w("("),i.productCount,w(")")])]})])}if(e.widget.type==s.Tags){const i=t;return l("li",{key:t.key,"data-tag-id":t.key,class:p("kmb-page-sidebar-widget-content-list-item kmb-collection-sidebar-widget-content-list-item kmb-collection-sidebar-widget-content-list-tag-item",{"kmb-collection-active-tag":o.value==(t==null?void 0:t.key)})},[l("button",{class:"kmb-collection-sidebar-widget-content-list-item-link",onClick:()=>O(i)},[t.label])])}},S=()=>{var t,i,n,r,a,m;if(((t=e.widget)==null?void 0:t.type)==s.Price)return l(W,{ref:"filterByPrice",isEnabled:!0,site:e.site,query:e.query,widgetSettings:e.widgetSettings,minRangePrice:(i=e.productGroupOptions)==null?void 0:i.minPrice,maxRangePrice:(n=e.productGroupOptions)==null?void 0:n.maxPrice,labelOverride:(r=e.widget.labelOverride)==null?void 0:r.lczValue,class:"kmb-collection-sidebar-accosrdion-content",onFilter:()=>{c("filter")}},null);if(((a=e.widget)==null?void 0:a.type)==s.Rating)return l(B,{query:e.query,isEnabled:!0,onFilter:()=>{c("filter")}},null);if(!C(b.value))return l("ul",{class:"kmb-page-sidebar-widget-content-list kmb-collection-sidebar-widget-content-list"},[(m=b.value)==null?void 0:m.map(h=>q(h))])};return{filterByPrice:d,renderWidgetContent:()=>{var i,n;if(((i=e.widget)==null?void 0:i.type)==s.Subscribe)return l(R,{widget:e.widget},null);if(((n=e.widget)==null?void 0:n.type)==s.Filters&&e.isEnabledFilter)return l(G,{query:e.query,activeKey:e.activeKey,collection:e.collection,isEnabledFilter:e.isEnabledFilter,productGroupOptions:e.productGroupOptions,uiType:"accordion",class:"kmb-collection-sidebar-filters-widget-content",onFilter:()=>{c("filter")},onSetActiveKey:r=>{c("setActiveKey",r)}},null);const t=e.widget.key||e.widget.type;return l(I,{activeKey:e.activeKey,onChange:r=>c("setActiveKey",r)},{default:()=>[l(A,{key:t,index:0,itemKey:t,class:"kmb-page-sidebar-widget-accordion-item kmb-collection-sidebar-widget-accordion-item"},{header:()=>{var r;return l("div",{class:"flex items-center justify-between"},[l(j,{value:(r=e.widget.labelOverride)==null?void 0:r.lczValue,tag:"h3",class:"kmb-widget-sub-title kmb-collection-sidebar-widget-title kmb-collection-sidebar-subscribe-form-widget-title"},null),_()])},default:()=>S()})]})}}},render(){return l("div",{class:p(`kmb-site-collection-structure-widget kmb-page-sidebar-widget kmb-collection-sidebar-widget kmb-collection-sidebar-widget-type-${this.widget.type}`),"data-widget-type":this.widget.type},[this.renderWidgetContent()])}}),X=k({name:"CollectionSidebar",props:{query:{type:Object,required:!0},collection:{type:Object,required:!0},widgetSettings:{type:Object,required:!0},productGroupOptions:{type:Object,required:!0},site:{type:Object},isEnabled:{type:Boolean,default:!1},isEnabledFilter:{type:Boolean,default:!1},columnSize:{type:String,default:"md_w-1-4"}},emits:["filter"],setup(e){const c=f(null),u=v(()=>{var o,d;return((d=(o=e.widgetSettings)==null?void 0:o.sidebarWidgets)==null?void 0:d.filter(b=>b.isEnabled))||[]});return{activeKey:c,availableWidgets:u}},render(){var e;if(this.isEnabled)return l("div",{class:p("kmb-site-page-sidebar-content-col kmb-site-collection-page-sidebar-col w-full kmb-widget-col kmb-widget-col-group",this.columnSize)},[l("div",{class:"kmb-site-page-sidebar-content kmb-site-collection-page-sidebar-content relative"},[(e=this.availableWidgets)==null?void 0:e.map((c,u)=>l(V,{key:c.key,widget:c,site:this.site,query:this.query,widgetIndex:u,activeKey:this.activeKey,collection:this.collection,widgetSettings:this.widgetSettings,isEnabledFilter:this.isEnabledFilter,productGroupOptions:this.productGroupOptions,onFilter:()=>this.$emit("filter"),onSetActiveKey:o=>{this.activeKey=o}},null))])])}});export{X as default};
