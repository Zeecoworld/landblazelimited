const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CN0jzT56.js","./ChUMkS6P.js","entry.CPpMyCbQ.css","./CUS6be9h.js","./BIucnIh5.js","./C5_VwG_t.js","./BG4hMk6f.js","./BgHkq_PJ.js","./DzFfo68f.js","./cuZZCMxh.js","./DldpU35S.js","./D9Hbs_0D.js","./A9nCysFq.js","./CeHZR0Ph.js","./uNGU_bZw.js","./BVv2S30c.js","./CfeTNxv7.js","./nKqe4eWP.js","./RCuncbrN.js","./Bfdg__Jl.js","./VGazA56a.js","./BdgPsTMy.js","./Ch4n82Ol.js","./BJMjv6C5.js"])))=>i.map(i=>d[i]);
var ie=Object.defineProperty;var ae=(e,l,u)=>l in e?ie(e,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[l]=u;var o=(e,l,u)=>ae(e,typeof l!="symbol"?l+"":l,u);import{b as O,e as q,a as $,f as se,t as re,g as R,n as le,o as ne,p as oe,q as i,r as n,D as ue,W as de,d as me,s as ge,u as ce,v as k,Q as he,h as we,i as m,B as I,w as z,G as _,c as s,P as fe,k as W,S as C,l as j,_ as U,x as Se,y as pe,z as ye}from"./ChUMkS6P.js";import{i as x}from"./DSoJ1F4P.js";import{u as be}from"./DSb9Sqaw.js";import{u as Te,P as ve}from"./vB1of1f_.js";import{_ as Ie}from"./jrEy4lmL.js";import{F as ze}from"./DRn4CTZ7.js";import{n as Re}from"./BVv2S30c.js";import{s as Be}from"./CDlfM46V.js";import{P as G}from"./BzJ3I6yS.js";import{P as _e}from"./CBBLqVke.js";import{B as We}from"./BG4hMk6f.js";import{L as M}from"./CWbzfonA.js";const Pe=(e,l,u)=>(!(l!=null&&l.length)||!u||e.sort((c,d)=>l.indexOf(c[u])>l.indexOf(d[u])?1:-1),e),De=async(e,l)=>{const u=O(),{$api:c}=u,d=q(),P=$(),f=e?`useBlogTemplate-${d}-${e}`:`useBlogTemplate-${d}`,S=se(f,()=>({data:null,tag:null,category:null}));return typeof l=="function"&&await l(async(h,p)=>{const{data:w,error:y}=await R(`blog-${d}`,async()=>{try{return await c.getSingle(new le({siteId:d,includeSidebarContent:!0}))}catch{}});return Te(y.value,w.value,"Page not found"),be(w.value),P.setPage(w.value),S.value.data=w.value,h&&(p==="tags"&&await u.runWithContext(async()=>{const{data:b}=await R(`tag-${d}-${h}`,async()=>await c.getSingle(new ne({...x(h)?{id:+h}:{slug:h},siteId:d})));S.value.tag=b.value}),p==="categories"&&await u.runWithContext(async()=>{const{data:b}=await R(`category-${d}-${h}`,async()=>await c.getSingle(new oe({...x(h)?{id:+h}:{slug:h},siteId:d})));S.value.category=b.value})),w}),{...re(S.value)}},st=De,A="lg-w-1-3 md-w-1-3 sm-w-1-2";class g{constructor(l){o(this,"items");o(this,"columnSize",A);o(this,"columnSizeWithSideBar",A);o(this,"columnSizeDifferentFirstItem",A);o(this,"columnAlign","left");o(this,"hasSlider",!1);o(this,"bgImage",!1);o(this,"hideImage",!1);o(this,"showReadTime",!0);o(this,"imageTitle",!1);o(this,"hideDescription",!1);o(this,"differentFirstImage",!1);o(this,"showReadTimeWithSidebar",!1);o(this,"shortDescriptionMaxChars");o(this,"imageResize",{width:600,height:600});o(this,"imageResizeWithSideBar",{width:600,height:600});o(this,"imageResizeDifferentFirstItem",{width:600,height:600});o(this,"imageResizeDifferentFirstItemWithSideBar",{width:600,height:600});o(this,"structureType");o(this,"variationType");Object.assign(this,l)}}const Fe={[i.V1]:{settings:new g({structureType:n.SimpleGrid,variationType:i.V1,columnAlign:"center",columnSize:"w-full",columnSizeWithSideBar:"w-full",showReadTimeWithSidebar:!0,imageResize:{width:1110,height:800},imageResizeWithSideBar:{width:730,height:587}})},[i.V2]:{settings:new g({structureType:n.SimpleGrid,variationType:i.V2,columnAlign:"center",columnSize:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeWithSideBar:"w-full",bgImage:!0,showReadTime:!0,showReadTimeWithSidebar:!0,imageResize:{width:538,height:400},imageResizeWithSideBar:{width:730,height:587}})},[i.V3]:{settings:new g({structureType:n.SimpleGrid,variationType:i.V3,columnAlign:"center",columnSize:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeWithSideBar:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",showReadTime:!0,imageResize:{width:538,height:400},imageResizeWithSideBar:{width:350,height:350}})}},Ve={[i.V1]:{settings:new g({structureType:n.Masonry,variationType:i.V1,columnAlign:"center",columnSize:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeWithSideBar:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeDifferentFirstItem:"w-full",showReadTime:!0,differentFirstImage:!0,imageResize:{width:538,height:400},imageResizeWithSideBar:{width:350,height:350},imageResizeDifferentFirstItem:{width:1110,height:800},imageResizeDifferentFirstItemWithSideBar:{width:730,height:587}})},[i.V2]:{settings:new g({structureType:n.Masonry,variationType:i.V2,columnAlign:"center",columnSize:"lg_w-1-3 md_w-1-3 lg-w-1-3 md-w-1-3 w-full",columnSizeDifferentFirstItem:"w-full",columnSizeWithSideBar:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",showReadTime:!1,hideDescription:!0,differentFirstImage:!0,imageResize:{width:350,height:350},imageResizeWithSideBar:{width:350,height:350},imageResizeDifferentFirstItem:{width:350,height:350},imageResizeDifferentFirstItemWithSideBar:{width:730,height:587}})},[i.V3]:{settings:new g({structureType:n.Masonry,variationType:i.V3,columnAlign:"center",columnSize:"lg_w-1-4 md_w-1-4 lg-w-1-4 md-w-1-4 w-full",columnSizeDifferentFirstItem:"w-full",columnSizeWithSideBar:"w-full",hideDescription:!0,differentFirstImage:!0,showReadTime:!1,showReadTimeWithSidebar:!0,imageResize:{width:255,height:255},imageResizeWithSideBar:{width:255,height:255},imageResizeDifferentFirstItem:{width:1110,height:800},imageResizeDifferentFirstItemWithSideBar:{width:350,height:350}})}},ke={[i.V1]:{settings:new g({structureType:n.SliderWithListGrid,variationType:i.V1,columnAlign:"center",columnSize:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeWithSideBar:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeDifferentFirstItem:"w-full",differentFirstImage:!0,showReadTime:!0,hasSlider:!0,imageResize:{width:538,height:400},imageResizeWithSideBar:{width:350,height:350},imageResizeDifferentFirstItem:{width:1110,height:800},imageResizeDifferentFirstItemWithSideBar:{width:730,height:587}})},[i.V2]:{settings:new g({structureType:n.SliderWithListGrid,variationType:i.V2,columnAlign:"center",columnSize:"w-full",hasSlider:!0,showReadTime:!0,showReadTimeWithSidebar:!0,columnSizeWithSideBar:"w-full",imageResize:{width:255,height:260},imageResizeDifferentFirstItem:{width:1920,height:720},imageResizeWithSideBar:{width:255,height:260}})},[i.V3]:{settings:new g({structureType:n.SliderWithListGrid,variationType:i.V3,columnAlign:"center",columnSize:"w-full",hasSlider:!0,hideImage:!0,showReadTime:!0,showReadTimeWithSidebar:!0,columnSizeWithSideBar:"w-full",imageResize:{width:540,height:540},imageResizeDifferentFirstItem:{width:1110,height:720},imageResizeWithSideBar:{width:450,height:450}})}},Ce={[i.V1]:{settings:new g({structureType:n.Mix,variationType:i.V1,columnAlign:"center",columnSize:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeDifferentFirstItem:"w-full",columnSizeWithSideBar:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",hasSlider:!0,showReadTime:!0,showReadTimeWithSidebar:!0,imageResize:{width:540,height:400},imageResizeWithSideBar:{width:350,height:350},imageResizeDifferentFirstItem:{width:1110,height:800}})},[i.V2]:{settings:new g({structureType:n.Mix,variationType:i.V2,columnAlign:"center",columnSize:"w-lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeDifferentFirstItem:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",columnSizeWithSideBar:"lg_w-1-2 md_w-1-2 lg-w-1-2 md-w-1-2 w-full",showReadTime:!1,differentFirstImage:!0,imageResize:{width:350,height:350},imageResizeDifferentFirstItem:{width:540,height:540},imageResizeWithSideBar:{width:350,height:350},imageResizeDifferentFirstItemWithSideBar:{width:350,height:350}})},[i.V3]:{settings:new g({structureType:n.Mix,variationType:i.V3,columnAlign:"center",columnSize:"lg_w-1-4 md_w-1-4 lg-w-1-2 md-w-1-2 w-full",columnSizeWithSideBar:"w-full",columnSizeDifferentFirstItem:"w-full",imageTitle:!0,showReadTime:!0,differentFirstImage:!0,shortDescriptionMaxChars:ue[de.ShortDescription],imageResize:{width:555,height:380},imageResizeWithSideBar:{width:365,height:380},imageResizeDifferentFirstItem:{width:1110,height:800},imageResizeDifferentFirstItemWithSideBar:{width:730,height:587}})}},Ae={[n.SimpleGrid]:Fe,[n.Masonry]:Ve,[n.SliderWithListGrid]:ke,[n.Mix]:Ce},Ee=(e=n.SimpleGrid,l=i.V1)=>{const c=Ae[e][l];return(c==null?void 0:c.settings)||new g};function Le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ye(e)}const xe={[C.Manual]:"defaultSortOrder",[C.Last]:"-publishDate",[C.Popular]:"-viewedCount"},Ge={[n.Masonry]:[],[n.SliderWithListGrid]:[i.V1],[n.Mix]:[i.V2,i.V3]},N=j(()=>U(()=>import("./CN0jzT56.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),import.meta.url)),Me=j(()=>U(()=>import("./RCuncbrN.js"),__vite__mapDeps([18,1,2,13,19,15,20,21,22,4,11,12,14,7,9,10,8,16,23]),import.meta.url)),rt=me({name:"WebSiteBlogCategoryTemplate",props:{site:{type:Object,required:!0},page:{type:Object,required:!0},title:{type:String},authorId:{type:Number},mainCategoryId:{type:Number},archiveDate:{type:String},postIds:{type:Array,default:()=>[]},isSubTemplate:{type:Boolean,default:!1}},async setup(e){const{t:l}=ge(),{$api:u}=O(),c=ce(),d=q(),P=$(),f=k(!1),S=k([]),T=k(new he),h=["kmb-site-app-body","kmb-site-blog-body","kmb-blog-template-default"];we({title:e.title,titleTemplate:e.title?"Blog | %s":"Blog",bodyAttrs:{class:h}}),P.setPage(e.page);const p=m(()=>{var t;return((t=e.page)==null?void 0:t.sidebarType)||I.None}),w=m(()=>{var t;return((t=e.page)==null?void 0:t.structureType)||n.SimpleGrid}),y=m(()=>{var t;return((t=e.page)==null?void 0:t.structureTypeVariationType)||i.V1}),b=m(()=>`kmb-site-blog-category-template-structure-type-${w.value}`),D=m(()=>`kmb-site-blog-category-template-structure-sidebar-type-${p.value}`),H=m(()=>`kmb-site-blog-category-template-structure-variation-type-${y.value}`),B=m(()=>Ee(w.value,y.value)),Q=m(()=>e.page.sliderElementShowSettings),Z=m(()=>e.page.postElementShowSettings),K=m(()=>{if(w.value==n.Mix){if(p.value==I.None)return!1;if(p.value==I.Left&&y.value==i.V2||y.value==i.V3)return!0}return!1}),E=m(()=>{var r;return((r=B.value)==null?void 0:r.hasSlider)?!z(e.page.sliderPostIds):!1}),F=m(()=>{var r,a;const t=p.value!==I.None;return t&&!!((a=(r=e.page)==null?void 0:r.sidebarWidgets)!=null&&a.length)}),X=m(()=>{const t=Ge[w.value];return t&&(z(t)||t.includes(y.value))?11:10}),V=m(()=>{const t=new ze({queryParameters:new _({siteId:d,includeAuthor:!0,includeOnlyPublished:!0,includeMainCategoryDetails:!0,fields:G.join(",")}),include:"total",orderBy:xe[e.page.sortType]||"-id",take:X.value||10,skip:0});return e.mainCategoryId&&(t.queryParameters.mainCategoryId=e.mainCategoryId),e.authorId&&(t.queryParameters.authorId=e.authorId),e.archiveDate&&(t.queryParameters.archiveDate=e.archiveDate),e.isSubTemplate&&(t.queryParameters.ids=e.postIds.length?e.postIds:[0]),Be(t,c.query)}),L=async t=>{try{const{include:r,orderBy:a,take:v,skip:ee}=t,te=new _({...t.queryParameters,include:r,orderBy:a,take:v,skip:ee});return await u.get(new _(te))}catch(r){throw r}},J=async(t,r=!0)=>{try{if(!r)return[];const a=await u.get(new _({siteId:d,ids:t,take:12,includeAuthor:!0,includeOnlyPublished:!0,includeMainCategoryDetails:!0,fields:G.join(",")}));return Pe(a.results||[],t,Re("id"))}catch(a){throw a}},Y=async(t,r)=>{try{f.value=!0;const a=await L(t||V.value);T.value=a}catch(a){console.log(a)}finally{if(f.value=!1,r){const a=document==null?void 0:document.querySelector("#kmb-paginated-data");a&&a.scrollIntoView({behavior:"smooth"})}}};return await(async()=>{try{const[{data:t},{data:r}]=await Promise.all([R(`posts-${d}`,async()=>await L(V.value)),R(`sliderPosts-${d}`,async()=>{var a;return await J((a=e.page)==null?void 0:a.sliderPostIds,E.value)})]);S.value=r.value,T.value=t.value}catch(t){console.log(t)}finally{f.value=!1}})(),{filter:V,queryResponse:T,sidebarType:p,isEnabedlSidebar:F,sidebarTypeClassName:D,structureTypestructureType:b,structureTypeVariationTypeClassName:H,fetchPosts:Y,renderPostList:()=>{var t,r;return f.value?s("div",{class:"w-full kmb-site-loading-wrapper text-center"},[s(M,{class:"kmb-simple-loading kmb-blue-loading",isLoading:f.value},null)]):z((t=T.value)==null?void 0:t.results)?s("div",{class:"kmb-site-not-found-message"},[l("messages.postsNotFound")]):s("div",{class:"kmb-widget-row kmb-site-blog-post-row"},[(r=T.value)==null?void 0:r.results.map((a,v)=>s(N,{key:a.id,index:v,post:a,isEnabledSideBar:F.value,bgFirstImage:K.value,settings:B.value,itemShowSettings:Z.value},null))])},renderPostListSlider:()=>{if(E.value){if(f.value)return s("div",{class:"w-full kmb-site-loading-wrapper text-center"},[s(M,{class:"kmb-simple-loading kmb-blue-loading",isLoading:f.value},null)]);if(!z(S.value)){let t;return s(pe,{indicators:!0,items:S.value,settings:{itemsToShow:1},class:"kmb-blog-category-template-slider"},Le(t=S.value.map((r,a)=>s(Se,{index:a,key:r.id,"data-post-id":r.id},{default:()=>{var v;return[s(We,{image:r.coverImage,imageResize:(v=B.value)==null?void 0:v.imageResizeDifferentFirstItem},{default:()=>[s("div",{class:"kmb-blog-category-template-overlay"},[s(N,{index:a,post:r,isHiddenImage:!0,isEnabledSideBar:F.value,settings:B.value,itemShowSettings:Q.value},null)])]})]}})))?t:{default:()=>[t]})}}}}},render(){if(!z(this.page))return s("div",{class:"kmb-site-page"},[s(Ie,null,{default:()=>[s(fe,{site:this.site,styles:this.page.styleSettings,class:"kmb-blog-template-nuxt-content"},{default:()=>[s("div",{id:"kmb-paginated-data",class:W("kmb-blog-category-template-content",ve(this.page),this.sidebarTypeClassName,this.structureTypestructureType,this.structureTypeVariationTypeClassName,{"kmb-site-blog-category-template-structure-sidebar-enabled":this.isEnabedlSidebar})},[this.renderPostListSlider(),s("div",{class:"kmb-site-blog-category-main-contnent kmd-site-default-page-spaces"},[s("div",{class:"kmb-widget-container"},[s("div",{class:W("kmb-widget-row")},[this.isEnabedlSidebar&&s("div",{class:W("kmb-site-blog-post-list-sidebar-col lg_w-1-4 w-full kmb-widget-col",{"order-last":this.sidebarType===I.Right})},[s(Me,{widgets:this.page.sidebarWidgets},null)]),s("div",{class:W("kmb-site-blog-post-list-content w-full kmb-widget-col",{"lg_w-3-4":this.isEnabedlSidebar})},[s("div",{class:"kmb-site-blog-post-content"},[this.renderPostList(),s(_e,{query:this.filter,queryResponse:this.queryResponse,onPaginate:()=>this.fetchPosts(null,!0),class:"kmb-pagination-list-center"},null)])])])])])])]})]})])}});export{rt as W,st as u};
