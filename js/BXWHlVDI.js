import{a0 as I,d as A,h as P,b as N,C as T,m as _,e as C,v as D,g as S,i as m,j as u,a2 as w,c as e,N as l,a8 as M,a9 as j,aa as E}from"./ChUMkS6P.js";import{f as F}from"./CUS6be9h.js";import{u as L}from"./DSb9Sqaw.js";import{P as o}from"./C8eTOF1G.js";import"./BIucnIh5.js";import"./Ck2GPDyH.js";const U=(s,a)=>{if(I(s))return null;const t=s==null?void 0:s.filter(Boolean);return t!=null&&t.length?t.join(a):null},q=(s,a,t,k,d)=>U([s,a,d,t,k],", ")||"-",J=A({name:"Invoice",async setup(){const s="Invoice";P({title:s,titleTemplate:"Store | %s",bodyAttrs:{class:["kmb-site-app-body","kmb-site-store-body","kmb-store-invoice-template-default"]}}),L({metaTitle:`Store | ${s}`});const{$api:a}=N(),t=T(),k=_(),d=C(),b=+t.params.id,p=D(null),{data:x}=await S(`invoice-${d}-${b}`,async()=>await a.get(new E({id:b,siteId:d})));p.value=x.value;const r=m(()=>{var i;return(i=p.value)==null?void 0:i.order}),h=m(()=>{var i;return(i=p.value)==null?void 0:i.sellerInfo}),f=m(()=>{if(u(h.value))return"";const{address:i,city:c,postalCode:n,country:v,state:$}=h.value;return q(i,c,n,v,$)}),g=m(()=>{if(u(r.value))return"";const{paymentMethod:i,payPalEmail:c,cardNumberLast4:n}=r.value;return i===w.PayPal?`PayPal ${c||""}`:i===w.CreditCard?`Stripe ${n}`:n||"Manual"}),y=m(()=>{var i;return u(r.value)?"":`${(i=r.value)==null?void 0:i.total} ${g.value}`});return{id:b,site:k,invoice:p,order:r,sellerInfo:h,vendorAddress:f,paymentsInfo:y,orderItemUnitTotalDiscount:i=>{var c;return((c=i.units)==null?void 0:c.reduce((n,v)=>n+(v==null?void 0:v.totalDiscount),0))||0}}},render(){var s,a;return u(this.invoice)?e("div",{class:"kmb-site-page kmb-site-store-invoice-page py-8 flex items-center justify-start text-center"},[e("div",{class:"kmb-widget-container"},[e("h1",{class:"kmb-site-font-36"},[l("Invoice by order id: "),this.id,l(" unavailable")])])]):e("div",{class:"kmb-site-page kmb-site-store-invoice-page py-8"},[e("div",{class:"kmb-widget-container"},[e("div",{class:"invoice-preview-wrapper"},[e("div",{class:"kmb-light-blue-bg"},[e("div",{class:"kmb-invoice-preview-section-wrapper"},[e("div",{class:"kmb-invoice-preview-row-wrapper"},[e("div",{class:"kmb-invoice-uppercase-text kmb-invoice-col md_w-1-2 w-full"},[e(M,{logo:(s=this.site)==null?void 0:s.headerLogo,title:(a=this.site)==null?void 0:a.title,class:"kmb-header-logo-link"},null)]),e("div",{class:"kmb-invoice-col md_w-1-2 w-full"},[e("div",{class:"kmb-invoice-uppercase-text"},[e("span",null,[this.$t("labels.invoice"),l(" #"),this.order.id])]),e("div",{class:"kmb-invoice-preview-row-wrapper"},[e("div",{class:"kmb-invoice-preview-cell"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.orderId"),l(":")]),e("p",{class:"kmb-invoice-light-text"},[this.order.id])])]),e("div",{class:"kmb-invoice-preview-row-wrapper"},[e("div",{class:"kmb-invoice-preview-cell"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.date"),l(":")]),e("p",{class:"kmb-invoice-light-text"},[this.order.createdAt?F(this.order.createdAt):"-"])])]),e("div",{class:"kmb-invoice-preview-row-wrapper"},[e("div",{class:"kmb-invoice-preview-cell"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.paymentMethod"),l(":")]),e("p",{class:"kmb-invoice-light-text"},[j(w[this.order.paymentMethod])])])])])])])]),e("div",{class:"kmb-white-bg"},[e("div",{class:"kmb-invoice-preview-section-wrapper"},[e("div",{class:"kmb-invoice-preview-row-wrapper"},[e("div",{class:"kmb-invoice-preview-col md_w-1-2 w-full"},[e("div",{class:"kmb-invoice-preview-cell w-2-3"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.billTo"),l(":")]),e("p",{class:"kmb-invoice-normal-text"},[this.order.billingFullName]),e("p",{class:"kmb-invoice-light-text"},[this.order.billingFullAddress])])]),e("div",{class:"kmb-invoice-preview-col md_w-1-2 w-full"},[e("div",{class:"kmb-invoice-preview-cell w-2-3"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.billFrom"),l(":")]),e("p",{class:"kmb-invoice-normal-text"},[this.sellerInfo.legalName||"-"]),e("p",{class:"kmb-invoice-light-text"},[this.vendorAddress])])])]),e("div",{class:"kmb-invoice-preview-row-wrapper pt-3"},[e("div",{class:"kmb-invoice-preview-col md_w-1-2 w-full"},[e("div",{class:"kmb-invoice-preview-cell w-2-3"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.contacts"),l(":")]),e("p",{class:"kmb-invoice-normal-text"},[this.order.phone||"-"]),e("p",{class:"kmb-invoice-light-text"},[this.order.billingEmail||"-"])])]),e("div",{class:"kmb-invoice-preview-col md_w-1-2 w-full"},[e("div",{class:"kmb-invoice-preview-cell w-2-3"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.contacts"),l(":")]),e("p",{class:"kmb-invoice-normal-text"},[this.sellerInfo.phoneNumber||"-"]),e("p",{class:"kmb-invoice-light-text"},[this.sellerInfo.primaryEmail||"-"])])])])])]),e("div",{class:"kmb-invoice-table table-responsive text-left"},[e("table",{class:"table kmb-table-wrapper w-full"},[e("thead",{class:"kmb-invoice-preview-table-header kmb-light-blue-bg"},[e("tr",null,[e("th",{class:"kmb-invoice-bold-text invoice-data-products"},[this.$t("labels.product")]),e("th",{class:"kmb-invoice-bold-text"},[this.$t("labels.price")]),e("th",{class:"kmb-invoice-bold-text"},[this.$t("labels.qty")]),e("th",{class:"kmb-invoice-bold-text invoice-data-discount"},[this.$t("labels.discount")]),e("th",{class:"kmb-invoice-bold-text invoice-data-total-price"},[this.$t("labels.totalPrice")])])]),this.order.orderItems.map(t=>e("tbody",{class:"kmb-invoice-preview-table-row"},[e("tr",null,[e("td",{class:"kmb-invoice-normal-text invoice-data-products"},[t.productName||"-"]),e("td",{class:"kmb-invoice-normal-text"},[e(o,{value:t.price,site:this.site},null)]),e("td",{class:"kmb-invoice-normal-text"},[t.quantity||"-"]),e("td",{class:"kmb-invoice-normal-text invoice-data-discount"},[e(o,{value:this.orderItemUnitTotalDiscount(t),site:this.site},null)]),e("td",{class:"kmb-invoice-normal-text invoice-data-total-price"},[e(o,{value:t.cartItemFinalPrice,site:this.site},null)])])]))])]),e("div",{class:"kmb-invoice-preview-row-wrapper kmb-invoice-total-column justify-end"},[e("div",{class:"kmb-invoice-preview-cell md_w-1-2 w-full"},[e("div",{class:"kmb-invoice-row"},[e("p",{class:"kmb-invoice-normal-text"},[this.$t("labels.subtotal")]),e("p",{class:"kmb-invoice-normal-text"},[e(o,{value:this.order.subtotal,site:this.site},null)])]),e("div",{class:"kmb-invoice-row"},[e("p",{class:"kmb-invoice-normal-text"},[this.$t("labels.shippingAmount")]),e("p",{class:"kmb-invoice-normal-text"},[e(o,{value:this.order.shippingCost,site:this.site},null)])]),e("div",{class:"kmb-invoice-row"},[e("p",{class:"kmb-invoice-normal-text"},[this.$t("labels.totalDiscount")]),e("p",{class:"kmb-invoice-normal-text"},[e(o,{value:this.order.discount,site:this.site},null)])]),this.order.refundCost>0&&e("div",{class:"kmb-invoice-row"},[e("p",{class:"kmb-invoice-normal-text"},[this.$t("labels.totalRefunded")]),e("p",{class:"kmb-invoice-normal-text"},[e(o,{value:this.order.refundCost,site:this.site,startSign:"-"},null)])]),e("div",{class:"kmb-invoice-row"},[e("p",{class:"kmb-invoice-normal-text"},[this.$t("labels.invoiceTotal")]),e("p",{class:"kmb-invoice-normal-text"},[e(o,{value:this.order.total,site:this.site},null)])])])]),e("div",{class:"kmb-white-bg"},[e("div",{class:"kmb-invoice-preview-section-wrapper"},[e("div",{class:"kmb-invoice-preview-row-wrapper"},[e("div",{class:"kmb-invoice-preview-cell"},[e("p",{class:"kmb-invoice-bold-text"},[this.$t("labels.payments"),l(":")]),e("p",{class:"kmb-invoice-light-text"},[this.paymentsInfo])])])])])])])])}});export{J as default};
