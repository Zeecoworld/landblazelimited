const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DbIIz7gr.js","./ChUMkS6P.js","./entry.CPpMyCbQ.css","./BVv2S30c.js","./DsvMmw88.js","./-oxM8m70.js","./DfxtQXwc.js","./D6uAcWDZ.js","./DSoJ1F4P.js","./CaE2FUfE.js","./B-lU7qM5.js","./CyET3sau.js","./D9Hbs_0D.js","./A9nCysFq.js","./CeHZR0Ph.js","./xwgnLmIi.js","./DfwKCUKn.js","./Mt02bkho.js","./CctDz5RS.js","./Dc9JWRGJ.js","./Cct5n2E0.js","./DRn4CTZ7.js","./1IXFzUcJ.js","./C5_VwG_t.js","./DGbmFum1.js","./6Po4j3qC.js","./CcdTgBWD.js","./VGazA56a.js","./uNGU_bZw.js","./BgHkq_PJ.js","./cuZZCMxh.js","./DldpU35S.js","./DzFfo68f.js","./CfeTNxv7.js","./m1t57SGh.js","./C8eTOF1G.js","./Ck2GPDyH.js","./BRCOEwDD.js","./B2EGLMWv.js"])))=>i.map(i=>d[i]);
import{d as V,h as H,m as W,e as X,X as Y,b as j,a as z,v as J,Y as K,Z as Q,$ as ee,i as _,a0 as p,a1 as q,c as l,a2 as k,a3 as te,l as se,_ as ne,a4 as ae,a5 as D,a6 as oe}from"./ChUMkS6P.js";import{_ as ie}from"./jrEy4lmL.js";import{u as ue}from"./Bo3_FeXm.js";import{u as le}from"./DSb9Sqaw.js";import"./BVv2S30c.js";const re=(f=new te)=>{try{const{isStripeEnabled:a,isPayPalEnabled:I}=f;return a?k.CreditCard:I&&!a?k.PayPal:!a&&!I?k.Manual:k.Manual}catch(a){console.log(a)}},ce=se(()=>ne(()=>import("./DbIIz7gr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38]),import.meta.url)),ve=V({name:"Checkout",async setup(){const f="Checkout";H({title:f,titleTemplate:"Store | %s",bodyAttrs:{class:["kmb-site-app-body","kmb-site-store-body","kmb-checkout-template-default"]}});const a=W(),I=X(),w=Y(),F=j(),E=z(),L=E.getUserIp,O=E.getUserAgent,e=J(new K({isAgree:!1,isSubscribed:!1,isCouponCode:!1,isCorporatePurchase:!1,isEqualBillingToShipping:!1,couponCode:"",cartItemInputs:[],paymentMethod:re(a),orderReceivingMethodType:Q.Delivery,siteId:I,ip:L,userAgent:O})),{userGeo:de,countries:U}=await ue(async t=>{var S,C,h,g,v,T,B,M,x;const{checkoutPageSettings:d}=a==null?void 0:a.storeAppSettings,{pageElementsShowSettings:o}=d||new ae,s=(S=o==null?void 0:o[D.BillingAddress])==null?void 0:S.isEnabled,u=(C=o==null?void 0:o[D.ShippingAddress])==null?void 0:C.isEnabled;if(!s&&!u)return oe({userGeo:null,countries:[]});const n=await t();if((h=n==null?void 0:n.value)!=null&&h.userGeo){const{countryCode:y,regionCode:$,city:G,postal:R}=(g=n.value)==null?void 0:g.userGeo,i=(v=n==null?void 0:n.value)==null?void 0:v.countries.find(b=>b.code==y),A=(i==null?void 0:i.code)||y;if(e.value.countryCodeByIp=A,e.value.billingCountryCode=s?A:null,e.value.billingCity=s?G:null,e.value.billingZip=s?R:null,e.value.shippingCountryCode=u?A:null,e.value.shippingCity=u?G:null,e.value.shippingZip=u?R:null,i!=null&&i.hasState&&!p(i==null?void 0:i.states)){const b=i.states,P=b.find(N=>N.code==$);P?(e.value.billingStateCode=s?P.code:null,e.value.shippingStateCode=u?P.code:null):(e.value.billingStateCode=s?(T=b[0])==null?void 0:T.code:null,e.value.shippingStateCode=u?(B=b[0])==null?void 0:B.code:null)}}else{const y=((x=(M=n==null?void 0:n.value)==null?void 0:M.countries[0])==null?void 0:x.code)||"US";e.value.billingCountryCode=s?y:null,e.value.shippingCountryCode=u?y:null}return n}),r=await F.runWithContext(async()=>{const{cart:t}=await ee(async d=>{var C,h,g,v;const o=((C=e.value)==null?void 0:C.billingCountryCode)||null,s=((h=e.value)==null?void 0:h.billingStateCode)||null,u=((g=e.value)==null?void 0:g.shippingCountryCode)||null,n=((v=e.value)==null?void 0:v.shippingStateCode)||null;return await d({billingCountryCode:o,billingStateCode:s,shippingCountryCode:u,shippingStateCode:n})});return t});le({metaTitle:`Store | ${f}`});const m=_(()=>{const t=r==null?void 0:r.value;return(t==null?void 0:t.productList)||w.getCartProducts}),c=_(()=>{const t=r==null?void 0:r.value;return(t==null?void 0:t.bundleList)||w.getCartBundleProducts}),Z=_(()=>{var d,o;if(p(m==null?void 0:m.value)&&p(c==null?void 0:c.value))return[];const t=(d=m.value)==null?void 0:d.map(s=>new q({skuId:s.skuId,quantity:s.quantity}));return p(c.value)||(o=c.value)==null||o.map(s=>{t.push(new q({bundleId:s.bundleId,quantity:1}))}),e.value.cartItemInputs=t,t});return{site:a,countries:U,cartItems:m,cartBundles:c,cartItemInputs:Z,checkoutFormData:e}},render(){return p(this.cartItems)&&p(this.cartBundles)?l("div",{class:"kmb-site-page"},[l("div",{class:"kmb-page-widget kmb-checkout kmb-checkout-empty"},[l("div",{class:"kmb-widget-container"},[l("div",{class:"kmb-checkout-empty-message"},[this.$t("messages.cartIsEmpty")])])])]):l("div",{class:"kmb-site-page"},[l(ie,null,{default:()=>[l(ce,{site:this.site,countries:this.countries,cartItems:this.cartItems,cartBundles:this.cartBundles,cartItemInputs:this.cartItemInputs,checkoutFormData:this.checkoutFormData},null)]})])}});export{ve as default};
