import{d as y,s as $,b as v,a as E,I as N,v as d,E as _,J as u,i as L,c as e,K as f,z as P,j}from"./ChUMkS6P.js";import{i as F}from"./DfxtQXwc.js";import{n as p}from"./BVv2S30c.js";import{u as R,N as a}from"./qvBQAMV1.js";import{F as A}from"./B-lU7qM5.js";import{F as I}from"./xwgnLmIi.js";import"./CyET3sau.js";import"./D9Hbs_0D.js";import"./A9nCysFq.js";import"./CeHZR0Ph.js";function b(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!P(t)}const J=y({name:"ForgotPassword",async setup(){const{t}=$(),{$api:i}=v(),{addNotification:s}=R(),l=E(),h=N(),c=d(!1),n=_(new u),g=d(null),k=L(()=>l.clientSession),w=async S=>{var m;if(S.preventDefault(),!F(n.email)){s({title:t("notifications.ohShap"),desc:t("notifications.emailIncorrect"),type:a.Error});return}try{const o=await i.post(new u({email:n.email}));o.success?(s({title:t("notifications.wellDone"),desc:t("notifications.wellSendEmailShortly"),type:a.Error}),c.value=!0):s({title:t("notifications.ohShap"),desc:o.message,type:a.Error})}catch(o){const r=o,x=((m=r==null?void 0:r.responseStatus)==null?void 0:m.message)||t("descriptions.unableSendPasswordRestore");s({title:t("notifications.ohShap"),desc:x,type:a.Error})}};return await(async()=>{j(k.value)||await l.signout()})(),{isSended:c,onSubmit:w,localePath:h,resetRequest:n,responseStatus:g}},render(){let t,i;return e("div",{class:"kmb-site-page flex items-center"},[e("div",{class:"kmb-forgot-password-page kmb-sm-widget-container"},[e("h2",{class:"kmb-widget-title-h2 kmb-widget-title-no-divider text-center kmb-widget-col-group-no-margin"},[this.$t("authentification.forgotPassword")]),!this.isSended&&e("p",{class:"mb-kmb-xl-group text-center kmb-widget-text-body1 mt-6"},[this.$t("authentification.enterYourEmailAddressAndWeWillSend")]),e("form",{ref:"form",onSubmit:s=>this.onSubmit(s),class:"kmb-form-login mt-4"},[this.isSended?e("div",{class:"kmb-forgor-password-banner kmb-mini-banner-bg p-6 text-center kmb-widget-text-body1 mb-kmb-default-group"},[this.$t("authentification.weHaveEmailed")," ",e("span",{class:"kmb-site-bold-link mx-1"},[this.$t("authentification.followTheLinkLetter")])," ",this.$t("authentification.ifTheLetter")]):e(I,{label:this.$t("labels.email"),class:"kmb-email-block"},{default:()=>[e(A,{modelValue:this.resetRequest.email,"onUpdate:modelValue":s=>this.resetRequest.email=s,id:p("email"),fieldName:p("email"),responseStatus:this.responseStatus,placeholder:this.$t("labels.emailAddress")},null)]}),e("div",{class:"kmb-default-group text-center"},[e("button",{class:"w-full kmb-widget-btn mt-3"},[this.isSended?this.$t("authentification.resendLink"):this.$t("authentification.sendLink")])])]),e("div",{class:"text-center kmb-widget-text-body1 mt-5"},[e(f,{to:"/login",class:"kmb-form-link underline"},b(t=this.$t("authentification.logIn"))?t:{default:()=>[t]}),e("span",{class:"lowercase mx-2"},[this.$t("labels.or")]),e(f,{to:"/login",class:"kmb-form-link underline"},b(i=this.$t("buttons.signUp"))?i:{default:()=>[i]})])])])}});export{J as default};
