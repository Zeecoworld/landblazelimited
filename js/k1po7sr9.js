const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CXg4bqFr.js","./ChUMkS6P.js","./entry.CPpMyCbQ.css","./6Po4j3qC.js","./BVv2S30c.js","./CcdTgBWD.js","./VGazA56a.js","./D9Hbs_0D.js","./A9nCysFq.js","./CeHZR0Ph.js","./BJMjv6C5.js"])))=>i.map(i=>d[i]);
var ce=Object.defineProperty;var ue=(e,i,o)=>i in e?ce(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o;var f=(e,i,o)=>ue(e,typeof i!="symbol"?i+"":i,o);import{b as B,e as $,f as A,t as x,aP as N,v as T,Q,g as U,ab as H,eP as de,eQ as M,eR as pe,eS as C,eT as O,af as w,eb as y,dJ as m,eU as ge,eV as L,eW as G,eX as Y,eY as _,eZ as be,d as q,s as Z,i as v,c as a,z as me,u as ye,aQ as we,e_ as fe,k as he,P as Se,l as ve,_ as Ee,ad as ke,w as F,S as Pe}from"./ChUMkS6P.js";import{R as Oe}from"./CBBLqVke.js";import{a as W,s as D,G as Te,C as Ce}from"./BnImoa7n.js";import{G as I}from"./CcdTgBWD.js";import{g as K}from"./CaE2FUfE.js";import{W as Fe}from"./CiHLLTvI.js";import{W as Le}from"./ah8qzS9z.js";import Ge from"./DDDgIi3Z.js";import{S as J}from"./Cct5n2E0.js";import Ie from"./DOhtIOqX.js";import"./Ds_RWLZA.js";import"./BVv2S30c.js";import"./DSoJ1F4P.js";import"./CDlfM46V.js";import"./1IXFzUcJ.js";import"./ClCWloev.js";import"./CWbzfonA.js";import"./QBgLLMRt.js";import"./BgHkq_PJ.js";import"./CeHZR0Ph.js";import"./CY0cy9zf.js";import"./6Po4j3qC.js";import"./VGazA56a.js";import"./D9Hbs_0D.js";import"./A9nCysFq.js";import"./D03YGIr3.js";import"./BlexT4wM.js";import"./C5_VwG_t.js";import"./BCJj-5qu.js";import"./lrIEU_yr.js";import"./BooiBbdB.js";import"./C8eTOF1G.js";import"./Ck2GPDyH.js";import"./DRn4CTZ7.js";import"./CyET3sau.js";const Ve=async(e,i)=>{const{$api:o}=B(),b=$(),n=A(`useCollectionProducts-${e==null?void 0:e.id}`,()=>({data:null}));return typeof i=="function"&&await i(async(c,d)=>{try{const s=W(c,d);if(N.isEmptyObject(s))return T(new Q({}));const k=D(s==null?void 0:s.productGroupsDic),{data:p}=await U(`collection-products-${b}-${c==null?void 0:c.id}`,async()=>{const h=new H({...s});return k&&(h.productGroupsDic=k),await o.get(h)});return N.isEmptyObject(p.value)||(c.products=p.value),n.value.data=p.value,p}catch(s){console.log(s)}}),{...x(n.value)}},Re=async(e,i)=>{const{$api:o}=B(),b=$(),n=A(`useProductGroupOptions-${e==null?void 0:e.id}`,()=>({data:null,isLoading:!1}));return typeof i=="function"&&await i(async(c,d)=>{try{const s=W(c,d),k=D(s==null?void 0:s.productGroupsDic),{data:p}=await U(`productGroupOptions-${c.id}`,async()=>{const h=new de({siteId:b,collectionId:c.id,includeOnlyPublished:!0,maxPrice:s==null?void 0:s.maxPrice,minPrice:s==null?void 0:s.minPrice,rating:s==null?void 0:s.rating,tagLabels:s==null?void 0:s.tagLabels,productGroupsDic:k});return await o.get(h)});return n.value.data=p.value,p}catch(s){throw s}}),{...x(n.value)}},X={},ee={};K(_).forEach(e=>{X[e]=new M({isEnabled:!0})});K(be).forEach(e=>{ee[e]=new M({isEnabled:!0})});class _e extends pe{constructor(o){super(o);f(this,"structureType",C.Simple);f(this,"topFilterEnabledSettings",X);f(this,"productElementShowSettings",ee);f(this,"sidebarWidgets",[new O({key:w(),type:y.Collections,isEnabled:!0,labelOverride:new m({lczValue:"Collections"}),contentListItems:[]}),new O({key:w(),type:y.Tags,isEnabled:!0,labelOverride:new m({lczValue:"Tags"}),contentListItems:[]}),new O({key:w(),type:y.Price,isEnabled:!0,labelOverride:new m({lczValue:"Price range"}),contentListItems:[]}),new O({key:w(),type:y.Filters,isEnabled:!0,labelOverride:new m({lczValue:"Filters"}),contentListItems:[]}),new O({key:w(),type:y.Rating,isEnabled:!0,labelOverride:new m({lczValue:"Rating"}),contentListItems:[]}),new O({key:w(),type:y.Subscribe,isEnabled:!0,labelOverride:new m({lczValue:"Subscribe to our newsletter"}),subscribe:new ge({description:new Fe({lczText:new m({lczValue:"Do you want to know all the news? Subscribe our newsletter to get weekly updates."})}),formSettings:new Le})})]);f(this,"filterWidgets",[new L({key:w(),type:G.Tags,isEnabled:!1,labelOverride:new m({lczValue:"Tags"}),contentListItems:[]}),new L({key:w(),type:G.Price,isEnabled:!1,labelOverride:new m({lczValue:"Price"}),contentListItems:[]}),new L({key:w(),type:G.Rating,isEnabled:!1,labelOverride:new m({lczValue:"Rating"}),contentListItems:[]}),new L({key:w(),type:G.Filters,isEnabled:!0,labelOverride:new m({lczValue:"Filters"}),contentListItems:[]})]);f(this,"productItemButtonLabel","Add to cart");f(this,"styleSettings",new Y);Object.assign(this,o)}}function qe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!me(e)}const We=q({name:"ProductSorting",props:{query:{type:Object,required:!0},widgetSettings:{type:Object,required:!0}},emits:["filter"],setup(e,{emit:i}){const{t:o}=Z(),b=`${o("labels.sortBy")}:`,n=v(()=>[{value:"name",name:o("labels.alphabeticallyAToZ")},{value:"-name",name:o("labels.alphabeticallyZToA")},{value:"price",name:o("labels.priceLowToHigh")},{value:"-price",name:o("labels.priceHighToLow")},{value:"createdAt",name:o("labels.dateOldToNew")},{value:"-createdAt",name:o("labels.dateNewToOld")}]);return{label:b,sortList:n,onFilter:()=>{i("filter")}}},render(){var e;if((e=this.widgetSettings.topFilterEnabledSettings[_.Sort])!=null&&e.isEnabled){let i;return a("div",{class:"kmb-collection-product-sorting kmb-widget-col"},[a("div",{class:"kmb-collection-top-filter-group kmb-site-default-dir"},[a("span",{class:"kmb-collection-top-filter-group-label"},[this.label]),a(J,{modelValue:this.query.orderBy,"onUpdate:modelValue":o=>this.query.orderBy=o,class:"kmb-collection-select-sort-products kmb-select-dropdown kmb-collection-top-filter-group-select kmb-select-dropdown kmb-select-w-70",texts:{placeholder:this.$t("labels.default")},onChange:()=>this.onFilter()},qe(i=this.sortList.map(o=>a("option",{value:o.value},[o.name])))?i:{default:()=>[i]})])])}}}),De=[6,9,12,15,18,21,24],R=De,je=q({name:"ProductDisplayQtyItems",props:{query:{type:Object,required:!0},widgetSettings:{type:Object,required:!0}},emits:["filter"],setup(e,{emit:i}){const{t:o}=Z();return{label:`${o("labels.show")}`,onFilter:()=>{i("filter")}}},render(){if(this.widgetSettings.topFilterEnabledSettings[_.ShowItems].isEnabled)return a("div",{class:"kmb-collection-display-qty-products kmb-widget-col"},[a("div",{class:"kmb-collection-top-filter-group kmb-site-default-dir"},[a("span",{class:"kmb-collection-top-filter-group-label"},[this.label]),a(J,{modelValue:this.query.take,"onUpdate:modelValue":e=>this.query.take=e,class:"kmb-collection-select-show-products kmb-select-dropdown kmb-collection-top-filter-group-select kmb-select-w-30",texts:{placeholder:this.$t("labels.showingResults")},onChange:this.onFilter},{default:()=>[R==null?void 0:R.map(e=>a("option",{value:e},[e.toString()]))]})])])}}),ze=ve(()=>Ee(()=>import("./CXg4bqFr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)),Ne=[y.Filters,y.Rating,y.Price,y.Tags],Pt=q({name:"CollectionT1",props:{site:{type:Object,required:!0},page:{type:Object,required:!0},widgetId:{type:String},widgetKey:{type:Number},widgetIndex:{type:Number,default:0},isEnabledAnimation:{type:Boolean,default:!1},animateClassName:{type:String,default:"animate__fadeInUp"}},async setup(e){const i=ye(),o=we(),b=T(!1),n=T(new H),E=T(I.Two),c=T(new fe),d=T(new Q),s=v(()=>e.page.widgetSettings||new _e),k=v(()=>s.value.styleSettings||new Y),p=v(()=>{const{structureType:t,sidebarWidgets:r}=s.value;return t==C.Simple?!1:!!(r!=null&&r.length)}),h=v(()=>{var t;return(t=s.value)!=null&&t.topFilterEnabledSettings?Object.values(s.value.topFilterEnabledSettings).some(r=>r.isEnabled):!1}),V=v(()=>{const{structureType:t,sidebarWidgets:r,filterWidgets:l}=s.value;if((t==C.WithSidebar||t==C.WithFilters)&&p.value){const g=r==null?void 0:r.find(P=>P.type==y.Filters);return(g==null?void 0:g.isEnabled)||!1}return!1}),te=v(()=>{const{structureType:t,sidebarWidgets:r}=s.value;if((t==C.WithSidebar||t==C.WithFilters)&&p.value){const l=(r==null?void 0:r.filter(g=>Ne.includes(g.type)&&g.isEnabled))||[];return!!(l!=null&&l.length)}return!1}),se=()=>{try{const t=ke("grid_display");t.value&&I[t.value]?E.value=t.value:E.value=p.value?I.Three:I.Four}catch(t){console.log(t)}},ie=async()=>{try{if(F(n.value))return;const{minPrice:t,maxPrice:r,rating:l,tagLabels:g,productGroupsDic:P,orderBy:u,take:S}=n.value,ne=new Te({rangePrices:t||r?`${t},${r}`:null,rating:l,tagLabels:F(g)?null:g.join(","),q:D(P),orderBy:F(u)||u===Ce[Pe.Manual]?null:u,take:S});await Oe.mergeToRoute(o,i,ne)}catch(t){console.log(t)}},j=async(t=!1,r=!0)=>{var l,g,P;try{b.value=!0;const{data:u}=await Ve(e.page,async S=>await S(e.page,i.query));r?d.value=u.value:(d.value.offset=(l=u.value)==null?void 0:l.offset,d.value.total=(g=u.value)==null?void 0:g.total,d.value.results=[...d.value.results,...(P=u.value)==null?void 0:P.results])}catch(u){const S=u;console.log(S),S.responseStatus&&S.responseStatus.errorCode=="404"&&(d.value.results=[])}finally{if(b.value=!1,t){const u=document==null?void 0:document.querySelector("#kmb-paginated-data");u&&u.scrollIntoView({behavior:"smooth"})}}},z=async()=>{try{if(te.value){const{data:t}=await Re(e.page,async r=>await r(e.page,i.query));c.value=t.value}}catch(t){console.log(t)}},oe=async()=>{var t,r;try{if(!F((t=e.page)==null?void 0:t.products)){d.value=(r=e.page)==null?void 0:r.products;return}await j()}catch(l){console.log(l)}},re=async()=>{var t,r;try{if(!F((t=e.page)==null?void 0:t.productGroupOptions)){c.value=(r=e.page)==null?void 0:r.productGroupOptions;return}await z()}catch(l){console.log(l)}},ae=async()=>{try{n.value=W(e.page,i==null?void 0:i.query),await Promise.all([oe(),re()])}catch(t){console.log(t)}},le=async(t=!1,r=!0)=>{try{if(b.value)return;await ie(),await Promise.all([j(t,r),z()])}catch(l){console.log(l)}};return(async()=>{try{se(),await ae()}catch(t){console.log(t)}})(),{query:n,isLoading:b,queryResponse:d,widgetSettings:s,widgetStyleSettings:k,isEnabledSidebar:p,gridViewLayoutType:E,productGroupOptions:c,isEnabledProductsFilters:V,isEnabledDisplayControlsFilter:h,onFilterCollection:le}},render(){return a(Se,{site:this.site,styles:this.widgetStyleSettings,class:"kmb-page-widget kmb-site-store-app-page-widget kmb-site-app-page-widget kmb-site-collection-widget"},{default:()=>[a("div",{class:he("kmb-site-collection-widget-body",{"kmb-site-collection-widget-body-with-sidebar":this.isEnabledSidebar}),id:"kmb-paginated-data"},[a("div",{class:"kmb-widget-container"},[a("div",{class:"kmb-collection-top-filter-row kmb-widget-row justify-end items-center mb-8"},[this.isEnabledDisplayControlsFilter&&a("div",{class:"kmb-collection-top-filter-group-row kmb-widget-col"},[a("div",{class:"kmb-widget-row justify-end items-center"},[a(We,{query:this.query,widgetSettings:this.widgetSettings,onFilter:async()=>await this.onFilterCollection(!0)},null),a(je,{query:this.query,widgetSettings:this.widgetSettings,onFilter:async()=>await this.onFilterCollection(!0)},null)])]),a(Ie,{gridViewLayoutType:this.gridViewLayoutType,widgetSettings:this.widgetSettings,isEnabledSidebar:this.isEnabledSidebar,class:"kmb-product-grid-layout kmb-widget-col",onChange:e=>{this.gridViewLayoutType=e}},null)]),a("div",{class:"kmb-widget-row"},[a(ze,{site:this.site,collection:this.page,isEnabled:this.isEnabledSidebar,widgetSettings:this.widgetSettings,isEnabledFilter:this.isEnabledProductsFilters,query:this.query,productGroupOptions:this.productGroupOptions,onFilter:async()=>await this.onFilterCollection(!0)},null),a(Ge,{site:this.site,query:this.query,isBottomSku:!0,isEnabledButton:!0,isLoading:this.isLoading,queryResponse:this.queryResponse,widgetSettings:this.widgetSettings,isEnabledSidebar:this.isEnabledSidebar,gridViewLayoutType:this.gridViewLayoutType,onFetch:async()=>await this.onFilterCollection(!0),onSeeMore:async()=>await this.onFilterCollection(!1,!1)},null)])])])]})}});export{Pt as default};
