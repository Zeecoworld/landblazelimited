import{d as S,eR as k,u as L,aQ as q,i as o,eZ as w,dy as B,c as i,k as d,a0 as v,dP as R,z as P}from"./ChUMkS6P.js";import{a as p,P as _,R as E}from"./CBBLqVke.js";import{G as r}from"./CcdTgBWD.js";import{L as M}from"./CWbzfonA.js";import{P as T}from"./QBgLLMRt.js";import"./BgHkq_PJ.js";import"./CeHZR0Ph.js";import"./CY0cy9zf.js";import"./6Po4j3qC.js";import"./BVv2S30c.js";import"./VGazA56a.js";import"./D9Hbs_0D.js";import"./A9nCysFq.js";import"./D03YGIr3.js";import"./BlexT4wM.js";import"./CaE2FUfE.js";import"./C5_VwG_t.js";import"./CiHLLTvI.js";import"./BCJj-5qu.js";import"./lrIEU_yr.js";import"./BooiBbdB.js";import"./C8eTOF1G.js";import"./Ck2GPDyH.js";function O(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!P(e)}const oe=S({name:"ProductList",props:{query:{type:Object,required:!0},queryResponse:{type:Object,required:!0},widgetSettings:{type:Object,default:()=>new k},site:{type:Object},gridViewLayoutType:{type:Number,default:r.Four},isLoading:{type:Boolean,default:!0},isEnabledSidebar:{type:Boolean,default:!1},isEnabledButton:{type:Boolean,default:!1},isBottomSku:{type:Boolean,default:!1},columnSize:{type:String,default:"md_w-3-4"},emptyResultMessage:{type:String}},emits:["fetch","seeMore"],setup(e,{emit:a}){const u=L(),l=q(),n=o(()=>{var t;return((t=e.query)==null?void 0:t.take)||12}),s=o(()=>p.maxLimit(n.value)),y=o(()=>{const{offset:t}=e.queryResponse||{};return p.currentPage(t,n.value)}),b=o(()=>{var t;return y.value*s.value<((t=e.queryResponse)==null?void 0:t.total)}),m=o(()=>{const{productElementShowSettings:t}=e.widgetSettings;return t.hasOwnProperty(w.ShowMoreBtn)?B(t,w.ShowMoreBtn):!0}),f=o(()=>b.value&&m.value),h=o(()=>{const t=`lg_w-1-${e.gridViewLayoutType}`;switch(e.gridViewLayoutType){case r.One:return"sm_w-full";case r.Two:return`${t} sm_w-1-2`;case r.Three:return`${t} md_w-1-3 sm_w-1-2`;case r.Four:return`${t} md_w-1-3 sm_w-1-2`;default:return t}});return{maxLimit:s,productColumnSize:h,isShowSeeMoreButton:f,isEnabledSeeMoreButton:m,onSeeMore:async()=>{var t,g;try{if(m){e.query.skip=y.value*s.value;const c={page:p.currentPage((t=e.query)==null?void 0:t.skip,(g=e.query)==null?void 0:g.take)};await E.mergeToRoute(l,u,c),a("seeMore",e.query)}}catch(c){console.log(c)}}}},render(){var a,u,l;let e;return this.isLoading?i("div",{class:d("w-full kmb-site-loading-wrapper text-center",this.isEnabledSidebar?this.columnSize:"kmb-full-product-list-column")},[i(M,{class:"kmb-simple-loading kmb-blue-loading",isLoading:this.isLoading},null)]):v((a=this.queryResponse)==null?void 0:a.results)?i("div",{class:"kmb-widget-col kmb-site-not-found-message kmb-site-default-text"},[this.emptyResultMessage||this.$t("messages.collectionIsEmpty")]):i("div",{class:d("kmb-product-list-column w-full kmb-widget-col",this.isEnabledSidebar?this.columnSize:"kmb-full-product-list-column")},[i("div",{class:d("kmb-product-list",this.gridViewLayoutType==r.One?"kmb-product-row-list":"kmb-product-grid-list kmb-widget-row"),"data-column-grid":this.gridViewLayoutType},[(u=this.queryResponse)==null?void 0:u.results.map(n=>{var s;return i(T,{key:n.id,product:n,site:this.site,isEnabledButton:!1,isShowOnlyColorSku:!0,isBottomSku:this.isBottomSku,columnSize:this.productColumnSize,gridViewLayoutType:this.gridViewLayoutType,buttonLabel:this.widgetSettings.productItemButtonLabel,elementShowSettings:(s=this.widgetSettings)==null?void 0:s.productElementShowSettings},null)})]),((l=this.queryResponse)==null?void 0:l.total)>this.maxLimit&&i("div",{class:"kmb-site-colletction-pagination"},[i("div",{class:"kmb-site-colletction-pagination-row kmb-widget-row justify-end items-center"},[this.isShowSeeMoreButton&&i("div",{class:"kmb-widget-col lg_w-1-3 md_w-1-2 w-full text-center my-4"},[i(R,{type:"button",isLoading:this.isLoading,classNames:"kmb-widget-store-primary-btn kmb-site-collection-see-more-btn",onClick:async()=>await this.onSeeMore()},O(e=this.$t("labels.seeMore"))?e:{default:()=>[e]})]),i("div",{class:"kmb-widget-col lg_w-1-3 md_w-1-2 w-full"},[i(_,{query:this.query,queryResponse:this.queryResponse,onPaginate:()=>this.$emit("fetch"),class:"kmb-pagination-list-center"},null)])])])])}});export{oe as default};
