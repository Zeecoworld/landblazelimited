import{_ as k}from"./BgHkq_PJ.js";import{d as p,b as x,a as T,i,aR as E,j as o,du as U,dt as S,c as d,k as m,dU as _,dH as P}from"./ChUMkS6P.js";import{n as C}from"./BVv2S30c.js";import{g as N}from"./cuZZCMxh.js";import{I as O}from"./CfeTNxv7.js";const H=p({name:"Img",props:{value:{type:Object,required:!0},images:{type:Array},resize:{type:Object},type:{type:String},loading:{type:String},widget:{type:Object},index:{type:Number,default:0},isEnabledAnimation:{type:Boolean,default:!1},isEnabledImagePreview:{type:Boolean,default:!1},isShowOriginalImageUrl:{type:Boolean,default:!1},animateClassName:{type:String,default:"animate__fadeInUp"}},emits:["load"],setup(t){const{$emitter:g}=x(),s=T().getSite,h=i(()=>{var e;return(e=t.value)!=null&&e.alt?t.value.alt:(s==null?void 0:s.title)||"hocoos"}),l=i(()=>N(t.widget,t.resize,t.index)),u=i(()=>E(t.value,l.value,t.isShowOriginalImageUrl)),c=i(()=>{var e;return((e=l.value)==null?void 0:e.width)||null}),w=i(()=>t.value.hasOwnProperty(C("isEnabled"))?t.value.isEnabled:!0),y=i(()=>{var e;return((e=l.value)==null?void 0:e.height)||null}),f=i(()=>t.type=="icon"),r=i(()=>{var a,n;if(o(t.value)||o((a=t.value)==null?void 0:a.imageLink))return!1;const{imageLink:e}=t.value;return!!((n=e==null?void 0:e.page)!=null&&n.id||e!=null&&e.externalLink)});return{alt:h,imageUrl:u,width:c,height:y,isEnabled:w,isIconType:f,isLinkedImage:r,onImageClick:()=>{try{if(r.value){const{imageLink:e}=t.value,a=e.isTargetBlank?"_blank":"_self";if(e.urlType==_.Page){const{id:n,slug:v,linkType:b}=e.page;if(n){const I=P({id:n,slug:v,pageTemplateType:b});window.open(I,a).focus()}return}e.externalLink&&window.open(e.externalLink,a).focus()}t.isEnabledImagePreview&&g.emit("imagePreview",new O({images:t.images,activeKey:t.value.key}))}catch(e){console.log(e)}}}},render(){if(this.imageUrl&&this.isEnabled)return U(d("div",{"data-width":this.width,class:m("kmb-widget-image",{"kmb-widget-image-icon kmb-widget-image-no-filter":this.isIconType})},[d(k,{provider:"customImgProv",loading:"lazy",densities:"x1",alt:this.alt,src:this.imageUrl,width:this.width,height:this.height,"data-width":this.width,"data-height":this.height,placeholder:[this.width,this.height],onLoad:()=>this.$emit("load"),onClick:()=>this.onImageClick(),class:m("kmb-widget-image-item ",this.isIconType?"kmb-widget-icon kmb-widget-type-icon":"kmb-widget-type-image",{"cursor-pointer":this.isLinkedImage}),style:{width:this.isIconType?`${this.width}px`:null,"max-width":this.width?`${this.width}px`:null,"max-height":this.height?`${this.height}px`:null}},null)]),[[S("animate-onscroll"),{className:`animate__animated ${this.animateClassName}`,isEnabled:this.isEnabledAnimation}]])}});export{H as I};
