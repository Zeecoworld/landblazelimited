const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./8l_USmwT.js","./ChUMkS6P.js","./entry.CPpMyCbQ.css","./DGbmFum1.js","./6Po4j3qC.js","./BVv2S30c.js","./CcdTgBWD.js","./VGazA56a.js","./uNGU_bZw.js","./BgHkq_PJ.js","./cuZZCMxh.js","./DldpU35S.js","./DzFfo68f.js","./CfeTNxv7.js","./m1t57SGh.js","./C8eTOF1G.js","./Ck2GPDyH.js","./Cj37CYs3.js"])))=>i.map(i=>d[i]);
import{d as y,u as H,v as w,a as $,i as d,dZ as F,du as x,dt as V,c as t,d_ as z,e7 as G,k as U,b as A,X as B,a0 as f,N as P,K as v,dH as C,z as W,l as L,_ as M,ah as K,s as Q,aQ as X,e8 as Y,ac as Z,aD as J,$ as T,aG as tt}from"./ChUMkS6P.js";import{L as et}from"./CWbzfonA.js";import{W as _}from"./DGbmFum1.js";import{g as st}from"./6Po4j3qC.js";import{I as D}from"./uNGU_bZw.js";import{P as O}from"./m1t57SGh.js";import"./BVv2S30c.js";import"./CcdTgBWD.js";import"./VGazA56a.js";import"./BgHkq_PJ.js";import"./cuZZCMxh.js";import"./DldpU35S.js";import"./DzFfo68f.js";import"./CfeTNxv7.js";import"./C8eTOF1G.js";import"./Ck2GPDyH.js";const rt=y({name:"DropdownMenu",emits:["show","hide","change"],setup(a,{emit:i}){const l=H(),s=w(!1),o=$().getSite,g=d(()=>{var n;if(!s.value)return;const m=document==null?void 0:document.querySelector("#kmb-header"),h=(n=o==null?void 0:o.headerSettings)!=null&&n.isSticky?0:window==null?void 0:window.scrollY;return{top:`${((m==null?void 0:m.offsetHeight)||105)-h}px`}}),c=()=>{s.value=!s.value,s.value?i("show",!0):i("hide",!1),s.value||i("change")},u=()=>{s.value!=!1&&(s.value=!1,i("hide",!1),i("change"))};return F(()=>l.path,(m,h)=>{u()}),{isOpen:s,menuStyles:g,onClose:u,onToggleDropDown:c}},render(){return x(t("div",{class:U("kmb-site-dropdown relative",{"kmb-site-open-dropdown-menu":this.isOpen})},[t("button",{class:"kmb-site-dropdown-btn-menu",onClick:()=>this.onToggleDropDown()},[this.$slots.header&&this.$slots.header()]),t(z,{name:"dropdown-menu-transition"},{default:()=>[x(t("div",{class:"kmb-site-dropdown-list-wrapper flex flex-col justify-center items-center",style:this.menuStyles},[this.$slots.default&&this.$slots.default({})]),[[G,this.isOpen]])]})]),[[V("click-outside"),this.onClose]])}});function I(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!W(a)}const at=L(()=>M(()=>import("./8l_USmwT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url)),ot=L(()=>M(()=>import("./Cj37CYs3.js"),__vite__mapDeps([17,1,2,8,9,5,10,11,12,13]),import.meta.url)),it=y({name:"MenuShoppingCart",props:{site:{type:Object,required:!0},shoppingCartType:{type:Number,required:!0},cartItems:{type:Array,required:!0},cartBundles:{type:Array,required:!0}},emits:["delete"],setup(a,{emit:i}){const{$emitter:l}=A(),s=B(),o=$().getSite;d(()=>s.getOrderDiscount||0),d(()=>s.getOrderSubtotal||0);const g=d(()=>s.getOrderTotal||0),c=d(()=>{var e,n,b;return((b=(n=(e=o.storeAppSettings)==null?void 0:e.shoppingPageSettings)==null?void 0:n.cardTotalSettings)==null?void 0:b.garantedSaveCheckout)||[]}),u=async e=>{try{await s.deleteProductFromCart(e),i("delete"),l.emit("deleteCartItem")}catch(n){console.log(n)}},m=e=>e.cartItemTotalDiscount?e.cartItemFinalPrice:null;return{orderTotal:g,garantedSaveCheckout:c,renderCartItem:e=>{var n;return t("div",{class:"kmb-menu-shopping-cart-item flex -mx-2 kmb-widget-el-group kmb-product-divider"},[t("div",{class:"kmb-md-widget-col kmb-cart-item-product-thumbnail-col"},[t("div",{class:"kmb-cart-item-product-thumbnail"},[t(D,{value:st(e),resize:{width:100,height:120},class:"kmb-widget-image-item-no-rounded w-full"},null)])]),t("div",{class:"kmb-md-widget-col w-3-4"},[t("div",{class:"flex -mx-4"},[t("div",{class:"kmb-widget-col w-4-5"},[t(v,{to:C({slug:e.productSlug,pageTemplateType:K.Product}),class:"kmb-cart-item-product-name kmb-site-default-text kmb-widget-title-h4",innerHTML:e.productName},null),!f(e==null?void 0:e.skuConfig)&&t("div",{class:"kmb-product-item-sku-config"},[t("div",{class:"kmb-product-options-sku-config-row flex flex-wrap items-center -mx-1"},[(n=e.skuConfig)==null?void 0:n.map(b=>t("div",{class:"kmb-product-options-sku-config-item px-1 my-1"},[t(ot,{optionGroups:e.productOptionGroups,record:b},null)]))])]),t("div",{class:"kmb-shopping-cart-item-price kmb-widget-flex-row kmb-flex-nowrap items-center mt-3"},[t("div",{class:"kmb-cart-item-product-qty"},[e.quantity,P("x")]),t(O,{site:o,value:new _({amount:e.cartItemBasePrice,unitFinalAmount:m(e)}),class:"kmb-cart-item-product-unit-price kmb-md-widget-col items-center"},null)])]),t("div",{class:"kmb-widget-col w-1-5 text-right"},[t("div",{class:"kmb-cart-item-delete"},[t("button",{class:"kmb-cart-item-delete-btn kmb-site-icon-delete",onClick:async()=>{await u(e)}},null)])])])])])}}},render(){var a,i,l;if(!f(this.cartItems)||!f(this.cartBundles)){let s,p;return t("div",{class:"kmb-shopping-cart-items-wrap kmb-site-default-dir"},[t("div",{class:"kmb-shopping-cart-items-head kmb-site-default-text kmb-site-font-16 uppercase font-semibold flex"},[this.$t("labels.shoppingCart")]),t("div",{class:"kmb-shopping-cart-items"},[(a=this.cartItems)==null?void 0:a.map(o=>this.renderCartItem(o)),(i=this.cartBundles)==null?void 0:i.map(o=>t(at,{bundle:o},null))]),t("div",{class:"kmb-shopping-cart-order-details-total kmb-site-default-dir kmb-widget-text-caption1 kmb-widget-el-group"},[t("div",{class:"kmb-widget-row justify-end"},[t("span",{class:"kmb-shopping-cart-order-details-total-name font-normal kmb-widget-col"},[this.$t("labels.total"),P(":")]),t(O,{site:this.site,value:new _({amount:this.orderTotal}),class:"kmb-widget-col"},null)])]),t("div",{class:"kmb-shopping-cart-items-btn-group text-center"},[t("div",{class:"kmb-view-cart-btn-group"},[t(v,{to:C({customPath:"/store/checkout"}),class:"kmb-widget-btn kmb-widget-primary-btn w-full"},I(s=this.$t("buttons.proceedToCheckout"))?s:{default:()=>[s]})]),t("div",{class:"kmb-checkout-btn-group"},[t(v,{to:C({customPath:"/store/shopping-cart"}),class:"kmb-widget-btn kmb-widget-secondary-btn w-full"},I(p=this.$t("buttons.viewCart"))?p:{default:()=>[p]})])]),!f(this.garantedSaveCheckout)&&t("div",{class:"kmb-site-guaranteed-safe-images kmb-shopping-cart-order-details-payment-icons hidden md_block kmb-widget-col-group"},[t("div",{class:"kmb-md-widget-row"},[(l=this.garantedSaveCheckout)==null?void 0:l.map(o=>t("div",{class:"kmb-md-widget-col w-1-4"},[t(D,{value:o,resize:{width:88,height:48},class:"kmb-site-guaranteed-safe-image kmb-shopping-cart-other-payment-image kmb-widget-image-no-filter w-full"},null)]))])])])}}}),k=a=>{console.log(a)},St=y({name:"MenuShoppingCartDropdown",props:{site:{type:Object,required:!0},isEnabledStoreApp:{type:Boolean,default:!1},isRedirectOnShoppingCartPage:{type:Boolean,default:!1}},setup(a){const{t:i}=Q(),{$emitter:l}=A(),s=B(),p=X(),o=tt(),g=w(!1),c=w(!1),u=w(null),m=d(()=>s.getCountCartItems||0),h=d(()=>s.getCartProducts),e=d(()=>s.getCartBundleProducts),n=d(()=>{var r;return((r=a.site.headerSettings)==null?void 0:r.shoppingCartType)||Y.DropDown}),b=async()=>{try{c.value=!0,await T(async r=>await r())}catch(r){k(r)}finally{c.value=!1}},j=async()=>{try{if(g.value=!0,c.value=!0,!a.isEnabledStoreApp)return;await T(async r=>await r())}catch(r){k(r)}finally{c.value=!1}},S=()=>{try{const r=u==null?void 0:u.value;r&&r.onToggleDropDown()}catch(r){k(r)}},q=()=>{try{a.isRedirectOnShoppingCartPage&&(l.emit("closeMenu"),p.push("/store/shopping-cart"))}catch(r){k(r)}},N=()=>t("span",{class:"kmb-extras-shopping-cart-item-icon relative",onClick:()=>q()},[t("i",{class:"kmb-site-icon-cart-o"},null),t("span",{class:"kmb-total-cart-items -mr-4 -mb-4"},[m.value])]),R=()=>{if(g.value)return c.value?t("div",{class:"kmb-shopping-cart-loadding-wrapper w-full kmb-site-loading-wrapper text-center"},[t(et,{class:"kmb-simple-loading kmb-blue-loading",isLoading:c.value},null)]):f(h.value)&&f(e.value)?t("div",{class:"kmb-empty-carts flex flex-col justify-center items-center"},[t("div",{class:"kmb-shopping-cart-is-empty-image kmb-widget-el-group"},[t("img",{src:`${o.public.staticFilesUrlPrefix}/static/img/wizard/illustration/category-illustration-sell.svg`,width:126,height:126},null)]),t("div",{class:"kmb-shopping-cart-is-empty-message kmb-site-default-text"},[i("messages.noProductsInCart")])]):t(it,{site:a.site,cartItems:h.value,cartBundles:e.value,shoppingCartType:n.value,onDelete:async()=>{await b()}},null)};return Z(()=>{l.on("addToCart",S)}),J(()=>{l.off("addToCart",S)}),{isOpen:g,drop_down:u,onShowCart:j,renderCartIcon:N,renderCartItemsList:R}},render(){return this.isRedirectOnShoppingCartPage?this.renderCartIcon():t(rt,{onShow:async()=>await this.onShowCart(),onHide:()=>{this.isOpen=!1},ref:"drop_down"},{header:()=>t("span",{class:"kmb-extras-item-icon"},[this.renderCartIcon()]),default:()=>t("div",{class:"kmb-extras-shopping-cart-content"},[this.renderCartItemsList()])})}});export{St as default};
