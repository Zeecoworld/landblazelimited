import{d as v,b as S,C as x,L as y,a as N,I as $,v as d,E as _,M as m,i as R,c as t,K as p,N as V,z as j,j as A}from"./ChUMkS6P.js";import{n as i}from"./BVv2S30c.js";import{F as f}from"./B-lU7qM5.js";import{F as C}from"./xwgnLmIi.js";import"./CyET3sau.js";import"./D9Hbs_0D.js";import"./A9nCysFq.js";import"./CeHZR0Ph.js";function I(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!j(e)}const q=v({name:"Login",async setup(){const{$api:e}=S(),s=x(),b=y(),n=N(),h=$(),l=d(!1),r=d(null),u=_(new m),g=R(()=>n.clientSession),w=async c=>{c.preventDefault();try{l.value=!0;const o=await e.post(new m({provider:"site_credentials",...u}));await n.setClientSession(o);const a=s.query.redirect||"/",k=b.resolve(a);window.open(k.href,"_self")}catch(o){console.log(o);const a=o;r.value=a.responseStatus||c}finally{l.value=!1}};return await(async()=>{A(g.value)||await n.signout()})(),{onSubmit:w,localePath:h,responseStatus:r,authenticateResponse:u}},render(){let e;return t("div",{class:"kmb-site-page flex items-center"},[t("div",{class:"kmb-login-page kmb-sm-widget-container"},[t("h1",{class:"text-center kmb-widget-title-h2 kmb-widget-title-no-divider kmb-widget-col-group-no-margin"},[this.$t("authentification.logIn")]),t("div",{class:"mb-kmb-xl-group text-center kmb-widget-text-body1 mt-2"},[this.$t("authentification.dontHaveAnAccount")," ",t(p,{to:this.localePath("/sign-up"),id:"sign-up-link",class:"kmb-form-link login-text-white underline"},I(e=this.$t("authentification.createAnAccount"))?e:{default:()=>[e]})]),t("form",{ref:"form",onSubmit:s=>this.onSubmit(s),class:"kmb-form-login"},[t("div",{class:"w-full kmb-login-form-block"},[t("div",{class:"mb-10"},[t(C,{label:this.$t("labels.email"),class:"kmb-email-block"},{default:()=>[t(f,{id:i("userName"),modelValue:this.authenticateResponse.userName,"onUpdate:modelValue":s=>this.authenticateResponse.userName=s,fieldName:i("userName"),responseStatus:this.responseStatus,onInput:()=>this.responseStatus=null,placeholder:this.$t("authentification.enterYourEmail")},null)]})]),t("div",{class:"mb-kmb-xl-group"},[t("div",{class:"kmb-site-field-group flex items-center justify-between"},[t("label",{class:"kmb-site-label kmb-widget-field-label"},[this.$t("authentification.password")]),t(p,{to:"/login/forgot-password",class:"kmb-form-link ml-2 mb-2 underline text-end"},{default:()=>[this.$t("authentification.forgot"),V("?")]})]),t(f,{type:"password",id:i("password"),modelValue:this.authenticateResponse.password,"onUpdate:modelValue":s=>this.authenticateResponse.password=s,fieldName:i("password"),responseStatus:this.responseStatus,onInput:()=>this.responseStatus=null,placeholder:this.$t("authentification.enterYourPassword"),isEbaledTogglePasswordType:!0},null)]),t("div",{class:"kmb-login-btn-group text-center mt-1"},[t("button",{id:"kmb-login-btn",class:"kmb-widget-btn w-full"},[this.$t("authentification.logIn")])])])])])])}});export{q as default};
